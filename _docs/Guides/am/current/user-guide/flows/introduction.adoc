= Flows

[label label-version]#New in version 3.5#

== Overview

You can use _flows_ to extend the standard AM behavior by executing policies during the `OnRequest` step of selected stages. Flows can be configured at security domain level or application level.

== Execution context

Each policy has access to the `Execution Context` to retrieve and set information required to execute the policy code.

The `Execution Context` data will be propagated to the next steps to be used later on (e.g custom HTML forms).

In this example we are getting `Execution Context` data using the link:/Reference/expression-language.html[Gravitee.io Expression Language^]:

----
{#request} : Current HTTP Request with parameters, headers, path, ...
{#context.attributes['client']} : OAuth 2.0 Client (if available) with clientId, clientName, ...
{#context.attributes['user']} : Authenticated User (if available) with username, firstName, lastName, email, roles, ...
----

image::am/current/graviteeio-am-userguide-policies.png[]

== Flows

Policies are executed only against selected steps throughout the flow.

The following is a list of the available Flows:

* link:./flow-config.html#all_flow[All Flow]: takes place for each request.
* link:./flow-config.html#login_flow[Login Flow]: takes place during the user login phase. It allows you to execute policies before displaying the login form or after user authentication.
* link:./flow-config.html#consent_flow[Consent Flow]: takes place during the user consent phase. It allows you to execute policies before displaying the User Consent HTML Page or after the user has given his consent to the processing of personal data.
* link:./flow-config.html#registration_flow[Registration Flow]: takes place during the user registration phase. It allows you to execute policies before displaying the User Regsitration HTML Page or after the user data has been processed.
